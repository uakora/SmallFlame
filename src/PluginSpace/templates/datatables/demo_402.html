{% extends 'index.html' %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="/static/3rdLibs/bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/plugins/datatables-1.10.18/datatables.css">
    <link rel="stylesheet" type="text/css" href="/static/css/PluginSpace/datatables/common.css">

    <style>

    </style>
{% endblock %}
{% block js %}
    <script src="/static/plugins/datatables-1.10.18/datatables.js"></script>
    <script src="/static/plugins/datatables-1.10.18/dataTables.treeGrid.js"></script>
    <script src="/static/3rdLibs/bootstrap-3.3.7/js/bootstrap.js"></script>
{% endblock %}

{% block content %}
<div class="flame-container flame-body">
    <div class="left-column">
        {% block left_nav_bar %}
        {% include 'datatables_left_nav_bar.html' with active_idx=demo_idx %}
        {% endblock %}
    </div>
    <div class="center-column">
        {% block center_content %}
         <table class="table table-striped table-bordered table-hover" id="treetable">
            <thead>
                <tr>
                    <th></th>
                    <th>部门名称</th>
                    <th>英文名称</th>
                    <th>负责人</th>
                    <th>部门电话</th>
                    <th>部门地址</th>
                    <th>主要职能</th>
                </tr>
            </thead>
            <tbody></tbody>
          </table>
        {% endblock %}
    </div>
</div>
{% endblock %}

{% block custom_js %}
<script type="text/javascript">
"user strict"

$(function () {
    dataTable = $('#treetable').DataTable({
        /**
         l - Length changing 改变每页显示多少条数据的控件
         f - Filtering input 即时搜索框控件
         t - The Table 表格本身
         i - Information 表格相关信息控件
         p - Pagination 分页控件
         r - pRocessing 加载等待显示信息
         **/
        "dom": "tr",
        "ordering": false, //禁用排序
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": "/static/data/tree_data.json",
        },
        'treeGrid': {
            'left': 0,
            'expandAll' : false, //是否默认展开 true 是
            'expandIcon': '<span> + </span>',
            'collapseIcon': '<span> - </span>'
        },
        "columns": [
            {
                className: 'treegrid-control',
                data: function (item) {
                    if (item.children != null && item.children.length > 0) {
                        return '<span> + </span>';
                    }
                    return '';
                }
            },
            {"data": "name"},
            {"data": "nameEn"},
            {"data": "headMan"},
            {"data": "tel"},
            {"data": "address"},
            {"data": "functions"}
        ],
        "columnDefs": [
            {
                "defaultContent": "",
                "targets": "_all"
            }
        ]
    });

});

</script>
{% endblock %}

