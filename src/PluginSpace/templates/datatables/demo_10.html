{% extends 'index.html' %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="/static/3rdLibs/bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/plugins/datatables-1.10.18/datatables.css">

    <link rel="stylesheet" type="text/css" href="/static/css/PluginSpace/datatables/common.css">
    <style>
        tr.group td {
            text-align: left;
            color: #fff;
            background-color: darkseagreen;
        }

    </style>
{% endblock %}
{% block js %}
    <script src="/static/plugins/datatables-1.10.18/datatables.js"></script>
    <script src="/static/3rdLibs/bootstrap-3.3.7/js/bootstrap.js"></script>
{% endblock %}

{% block content %}
<div class="flame-container flame-body">
    <div class="left-column">
        {% block left_nav_bar %}
        {% include 'datatables_left_nav_bar.html' with active_idx=10 %}
        {% endblock %}
    </div>
    <div class="center-column">
        {% block center_content %}
        <div>
            <table id="example" class="table table-striped" style="width: 100%;">
                <thead>
                    <tr>
                        <th>序号</th>
                        <th>群组</th>
                        <th>中文名</th>
                        <th>中文拼音</th>
                        <th>年龄</th>
                        <th>性别</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="row">
            <label class="control-label col-sm-1" style="text-align: right;">群组搜索</label>
            <div class="col-sm-4">
                <select id="group_st" class="form-control input-sm">
                    <option value="A">A</option>
                    <option value="AA">AA</option>
                    <option value="AAA">AAA</option>
                    <option value="B">B</option>
                    <option value="BB">BB</option>
                    <option value="BBB">BBB</option>
                    <option value="C">C</option>
                    <option value="CC">CC</option>
                    <option value="CCC">CCC</option>
                </select>
            </div>
        </div>
        {% endblock %}
    </div>
</div>
{% endblock %}

{% block custom_js %}
<script type="text/javascript">


$(document).ready(function () {


    var dt_table = $("#example").DataTable({
        "language": {
            "url": "/static/plugins/datatables-1.10.18/i18n/Chinese.lang"
        },
        'ajax': '/static/data/dt_10.txt',
        'order': [[4, 'desc'], [1, 'desc']],
        'columns': [
            {
                'data': null,
                'render': function (data, type, row, meta) {
                    return meta['row'] + 1;
                }
            },
            {'data': 'group'},
            {'data': 'name_cn'},
            {'data': 'name_py', 'visible': false},
            {'data': 'age'},
            {'data': 'sex'}
        ]
    });

    $("#group_st").change(function () {
        var sex = "男";
        var group = $(this).val();
        var group = '^' + group +'$';
        sex = '^' + sex +'$';
        dt_table
            .column(1).search(group, true, false)
            .column(5).search(sex, true, false)
            //.order([4, 'desc'], [1, 'desc'])
            //.draw();
        // 不能跟搜索写在一起，不然没效果
        //dt_table.order([4, 'desc'], [1, 'desc']).draw();
        dt_table.order([0, 'desc']).draw();
    });

});

</script>
{% endblock %}

