{% extends 'index.html' %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="/static/3rdLibs/bootstrap-3.3.7/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/plugins/datatables-1.10.18/datatables.css">

    <link rel="stylesheet" type="text/css" href="/static/css/PluginSpace/datatables/common.css">
    <style>
        td.details-control {
            background: url('/static/image/PluginSpace/demo_06/details_open.png') no-repeat center center;
            cursor: pointer;
        }
        tr.shown td.details-control {
            background: url('/static/image/PluginSpace/demo_06/details_close.png') no-repeat center center;
        }
    </style>
{% endblock %}
{% block js %}
    <script src="/static/plugins/datatables-1.10.18/datatables.js"></script>
    <script src="/static/3rdLibs/bootstrap-3.3.7/js/bootstrap.js"></script>
{% endblock %}

{% block content %}
<div class="flame-container flame-body">
    <div class="left-column">
        {% block left_nav_bar %}
        {% include 'datatables_left_nav_bar.html' with active_idx=6 %}
        {% endblock %}
    </div>
    <div class="center-column">
        {% block center_content %}
        <div>
            <table id="example" class="table table-striped" style="width: 100%;">
                <thead>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Office</th>
                        <th>Salary</th>
                    </tr>
                </thead>
            </table>
        </div>

        <section style="display: none">

        </section>
        {% endblock %}
    </div>
</div>
{% endblock %}

{% block custom_js %}
<script type="text/javascript">


$(document).ready(function () {
    var dt_table = $("#example").DataTable({
        "language": {
            "url": "/static/plugins/datatables-1.10.18/i18n/Chinese.lang"
        },
        "order": [[1, "asc"]],
        "ajax": "/static/data/objects.txt",
        "columns": [
            {
                "class": "details-control",
                "orderable": false,
                "data": null,
                "defaultContent": ""
            },
            {"data": "name"},
            {"data": "position"},
            {"data": "office"},
            {"data": "salary"},
        ]
    });

    $("#example tbody").on("click", "td.details-control", function () {
        $(dt_table.table().container()).addClass("selectable");
        $(dt_table.table().body()).addClass("highlight");



        var cur_tr = $(this).closest("tr");
        var cur_row = dt_table.row(cur_tr);

        var row_open = dt_table.row(".shown");
        if(row_open.index() && row_open.index() != cur_row.index()){
            row_open.child.hide();
            $(dt_table.table().body()).children("tr.shown").removeClass("shown");
        }

        if(cur_row.child.isShown()){
            cur_row.child.hide();
        }else {
            var tr_details = "<h4>行详细信息</h4>"
            cur_row.child(tr_details).show();
        }
        cur_tr.toggleClass("shown")
    });
});

</script>
{% endblock %}

